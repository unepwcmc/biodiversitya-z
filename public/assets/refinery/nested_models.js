(function(){jQuery(function(){return window.init_nested_sorts(),$("form").on("click",'[data-remove="true"]',function(t){return $(this).prev("input[type=hidden]").val("1"),$(this).closest('[data-nested-item="true"]').hide(),t.preventDefault()}),$("form").on("click",'[data-add="true"]',function(t){var e,n,i;return i=(new Date).getTime(),n=new RegExp($(this).data("id"),"g"),e=$(this).data("fields"),$(this).before(e.replace(n,i)),init_modal_dialogs(),init_nested_sorts(),init_tooltips(),t.preventDefault()})}),window.init_nested_sorts=function(){return $('[data-sortable="true"]').each(function(t,e){return $(e).sortable({axis:"y",stop:function(){return updateNestedSortablePositions()},handle:'[data-handle="true"]',forcePlaceholderSize:!0,items:'[data-sortable-item="true"]'})}),updateNestedSortablePositions()},window.updateNestedSortablePositions=function(){return $('[data-sortable="true"]').each(function(t,e){return $(e).find('[data-sortable-item="true"]').each(function(t,e){return $(e).find('[data-position="true"]').val(t)})})}}).call(this);